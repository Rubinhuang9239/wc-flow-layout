var y=Object.defineProperty;var b=(o,s,t)=>s in o?y(o,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[s]=t;var l=(o,s,t)=>(b(o,typeof s!="symbol"?s+"":s,t),t);(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerPolicy&&(i.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?i.credentials="include":e.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(e){if(e.ep)return;e.ep=!0;const i=t(e);fetch(e.href,i)}})();function m(o){let s=0;for(let t=0;t<o.length;t++)s=o[s]<=o[t]?s:t;return s}function w(o){queueMicrotask?queueMicrotask(o):Promise.resolve().then(o)}const f=class extends HTMLElement{constructor(){super();l(this,"_fl_w");l(this,"_fl_h");l(this,"_rb");l(this,"_mb");l(this,"_mb2");l(this,"_layouting",!1)}get gap(){return+(this.getAttribute("gap")||f.default_props.gap)}set gap(t){this.setAttribute("gap",t+"")}get cols(){return+(this.getAttribute("cols")||f.default_props.cols)}set cols(t){this.setAttribute("cols",t+"")}get item_w(){const{cols:t,gap:r}=this,e=window.getComputedStyle(this),i=parseInt(e.paddingLeft),c=parseInt(e.paddingRight);return(this.offsetWidth-r*(t-1)-(i+c))/t}connectedCallback(){this._rb=new ResizeObserver(t=>t.some(({target:r})=>r._fl_w!=r.offsetWidth||r._fl_h!=r.offsetHeight)&&this.relayout()),this._rb.observe(this),Array.prototype.forEach.call(this.children,t=>this._rb.observe(t)),this.relayout(),this._mb=new MutationObserver(t=>{t.forEach(r=>{r.addedNodes.forEach(e=>e instanceof HTMLElement&&this._rb.observe(e)),r.removedNodes.forEach(e=>e instanceof HTMLElement&&this._rb.unobserve(e))}),this.relayout()}),this._mb.observe(this,{childList:!0,attributes:!1}),this._mb2=new MutationObserver(()=>this.relayout()),this._mb2.observe(this,{childList:!1,attributes:!0})}disconnectedCallback(){this._rb.disconnect(),this._mb.disconnect(),this._mb2.disconnect()}relayout(){this._layouting||(this._layouting=!0,w(()=>{this._relayout(),this._layouting=!1}))}_relayout(){const t=this.children;if(t.length){const{cols:r,gap:e}=this,{item_w:i}=this;Array.prototype.forEach.call(t,n=>n.style.width=i+"px");const c=Array.prototype.map.call(t,n=>(n._fl_w=n.offsetWidth,n._fl_h=n.offsetHeight)),h=Array(r).fill(0),d=window.getComputedStyle(this),g=parseInt(d.paddingTop),_=parseInt(d.paddingLeft);for(let n=0;n<t.length;n++){const p=t[n],u=m(h);p.style.top=g+h[u]+"px",p.style.left=_+(i+e)*u+"px",h[u]+=c[n]+e}this.style.height=Math.max(...h)-e+"px",this._fl_w=this.offsetWidth,this._fl_h=this.offsetHeight}else this.style.height="0";this._mb2.takeRecords()}};let a=f;l(a,"default_props",Object.freeze({cols:2,gap:4}));customElements.define("wc-flow-layout",a);
