var m=Object.defineProperty;var y=(r,s,e)=>s in r?m(r,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[s]=e;var c=(r,s,e)=>(y(r,typeof s!="symbol"?s+"":s,e),e);(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function e(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(t){if(t.ep)return;t.ep=!0;const i=e(t);fetch(t.href,i)}})();function _(r){let s=0;for(let e=0;e<r.length;e++)s=r[s]<=r[e]?s:e;return s}function v(r){queueMicrotask?queueMicrotask(r):Promise.resolve().then(r)}const h=class extends HTMLElement{constructor(){super();c(this,"_rb");c(this,"_mb");c(this,"_mb2");c(this,"_layouting",!1)}get gap(){return+(this.getAttribute("gap")||h.default_props.gap)}set gap(e){this.setAttribute("gap",e+"")}get cols(){return+(this.getAttribute("cols")||h.default_props.cols)}set cols(e){this.setAttribute("cols",e+"")}get item_w(){const{cols:e,gap:o}=this,t=window.getComputedStyle(this),i=parseInt(t.paddingLeft),n=parseInt(t.paddingRight);return(this.offsetWidth-o*(e-1)-(i+n))/e}connectedCallback(){this._rb=new ResizeObserver(()=>this.relayout()),this._rb.observe(this),this._mb=new MutationObserver(e=>{e.forEach(o=>{o.addedNodes.forEach(t=>t instanceof HTMLElement&&this._rb.observe(t)),o.removedNodes.forEach(t=>t instanceof HTMLElement&&this._rb.unobserve(t))}),this.relayout()}),this._mb.observe(this,{childList:!0,attributes:!1}),this._mb2=new MutationObserver(()=>this.relayout()),this._mb2.observe(this,{childList:!1,attributes:!0})}disconnectedCallback(){this._rb.disconnect(),this._mb.disconnect(),this._mb2.disconnect()}relayout(){this._layouting||(this._layouting=!0,v(()=>{this._relayout(),this._layouting=!1}))}_relayout(){if(this.children.length){const{cols:e,gap:o}=this,{item_w:t}=this,i=window.getComputedStyle(this),n=parseInt(i.paddingTop),g=parseInt(i.paddingLeft),a=Array(e).fill(0),p=this.children,b=Array.prototype.map.call(this.children,l=>l.offsetHeight);for(let l=0;l<p.length;l++){const d=p[l],f=_(a);d.style.top=n+a[f]+"px",d.style.left=g+(t+o)*f+"px",d.style.width=t+"px",a[f]+=b[l]+o}this.style.height=Math.max(...a)-o+"px"}else this.style.height="0";this._mb2.takeRecords()}};let u=h;c(u,"default_props",Object.freeze({cols:2,gap:4}));customElements.define("flow-layout",u);
